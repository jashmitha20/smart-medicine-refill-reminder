{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\smart-medicine-refill-system\\\\frontend\\\\src\\\\pages\\\\LoginPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate, useLocation, Link } from 'react-router-dom';\nimport authService from '../services/authService.ts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  var _location$state;\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) || '/dashboard';\n  const onSubmit = async e => {\n    e.preventDefault();\n    setSubmitting(true);\n    setError(null);\n    try {\n      await authService.login({\n        email,\n        password\n      });\n      navigate(from, {\n        replace: true\n      });\n    } catch (err) {\n      setError((err === null || err === void 0 ? void 0 : err.error) || (err === null || err === void 0 ? void 0 : err.message) || 'Login failed');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const useDemoCredentials = async () => {\n    const demoEmail = process.env.REACT_APP_DEMO_EMAIL || 'demo@example.com';\n    const demoPassword = process.env.REACT_APP_DEMO_PASSWORD || 'demo1234';\n    setEmail(demoEmail);\n    setPassword(demoPassword);\n    setSubmitting(true);\n    setError(null);\n    try {\n      // Force mock sign-in directly to guarantee demo login works\n      const {\n        mockApi\n      } = await import('../services/mockApi.ts');\n      const resp = await mockApi.signin({\n        email: demoEmail,\n        password: demoPassword\n      });\n      const api = (await import('../services/api.ts')).default;\n      api.setAuthToken(resp.accessToken);\n      localStorage.setItem('user', JSON.stringify(resp.user));\n      navigate(from, {\n        replace: true\n      });\n    } catch (err) {\n      setError((err === null || err === void 0 ? void 0 : err.error) || (err === null || err === void 0 ? void 0 : err.message) || 'Login failed');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"demo-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Demo mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), \"If you enabled mock API, you can sign in with:\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Email: \", process.env.REACT_APP_DEMO_EMAIL || 'demo@example.com']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Password: \", process.env.REACT_APP_DEMO_PASSWORD || 'demo1234']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      style: {\n        maxWidth: 360\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true,\n          placeholder: \"you@example.com\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true,\n          placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        role: \"alert\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: submitting,\n          children: submitting ? 'Signing in...' : 'Sign in'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: useDemoCredentials,\n          disabled: submitting,\n          children: \"Use demo credentials\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: 12\n      },\n      children: [\"No account? \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Go back Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"GLOHNlEbXWuqsCaj8QbDMe1Qhf4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useNavigate","useLocation","Link","authService","jsxDEV","_jsxDEV","LoginPage","_s","_location$state","email","setEmail","password","setPassword","submitting","setSubmitting","error","setError","navigate","location","from","state","onSubmit","e","preventDefault","login","replace","err","message","useDemoCredentials","demoEmail","process","env","REACT_APP_DEMO_EMAIL","demoPassword","REACT_APP_DEMO_PASSWORD","mockApi","resp","signin","api","default","setAuthToken","accessToken","localStorage","setItem","JSON","stringify","user","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","type","value","onChange","target","required","placeholder","role","display","gap","disabled","onClick","marginTop","to","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/smart-medicine-refill-system/frontend/src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useLocation, Link } from 'react-router-dom';\r\nimport authService from '../services/authService.ts';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const navigate = useNavigate();\r\n  const location = useLocation() as any;\r\n  const from = location.state?.from || '/dashboard';\r\n\r\n  const onSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n    setError(null);\r\n    try {\r\n      await authService.login({ email, password });\r\n      navigate(from, { replace: true });\r\n    } catch (err: any) {\r\n      setError(err?.error || err?.message || 'Login failed');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const useDemoCredentials = async () => {\r\n    const demoEmail = process.env.REACT_APP_DEMO_EMAIL || 'demo@example.com';\r\n    const demoPassword = process.env.REACT_APP_DEMO_PASSWORD || 'demo1234';\r\n    setEmail(demoEmail);\r\n    setPassword(demoPassword);\r\n    setSubmitting(true);\r\n    setError(null);\r\n    try {\r\n      // Force mock sign-in directly to guarantee demo login works\r\n      const { mockApi } = await import('../services/mockApi.ts');\r\n      const resp = await mockApi.signin({ email: demoEmail, password: demoPassword });\r\n      const api = (await import('../services/api.ts')).default as any;\r\n      api.setAuthToken(resp.accessToken);\r\n      localStorage.setItem('user', JSON.stringify(resp.user));\r\n      navigate(from, { replace: true });\r\n    } catch (err: any) {\r\n      setError(err?.error || err?.message || 'Login failed');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <h2>Login</h2>\r\n      <div className=\"demo-info\">\r\n        <strong>Demo mode</strong>\r\n        If you enabled mock API, you can sign in with:\r\n        <div>Email: {process.env.REACT_APP_DEMO_EMAIL || 'demo@example.com'}</div>\r\n        <div>Password: {process.env.REACT_APP_DEMO_PASSWORD || 'demo1234'}</div>\r\n      </div>\r\n      <form onSubmit={onSubmit} style={{ maxWidth: 360 }}>\r\n        <div className=\"form-row\">\r\n          <label>Email</label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n            placeholder=\"you@example.com\"\r\n          />\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <label>Password</label>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n            placeholder=\"••••••••\"\r\n          />\r\n        </div>\r\n        {error && (\r\n          <div className=\"error\" role=\"alert\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <div style={{ display: 'flex', gap: 8 }}>\r\n          <button type=\"submit\" disabled={submitting}>\r\n            {submitting ? 'Signing in...' : 'Sign in'}\r\n          </button>\r\n          <button type=\"button\" onClick={useDemoCredentials} disabled={submitting}>\r\n            Use demo credentials\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <p style={{ marginTop: 12 }}>\r\n        No account? <Link to=\"/\">Go back Home</Link>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}